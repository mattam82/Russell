\def\ctxdot{\bullet}

\newcommand{\SubConvI}[1][\Gamma]{
\UAX{SubConv}
{$T \eqbr U$}
{$\subimpl{#1}{\ctxdot}{T}{U}$}
{$T = \hnf{T} `^ T "/=" \Pi, \Sigma, \{|\} `^ U = \hnf{U} `^ U "/="
  \{|\}$}
}

\newcommand{\SubConvIs}[1][\Gamma]{
\UAX{SubConv}
{$T \eqbr U$}
{$\subimpl{#1}{\ctxdot}{T}{U}$}
{} 
}

\newcommand{\SubHnfI}[1][\Gamma]{
\UAX{SubHnf}
{$\subimpl{#1}{c}{\hnf{T}}{\hnf{U}}$}
{$\subimpl{#1}{c}{T}{U}$}
{} 
}

\newcommand{\SubProdI}[1][\Gamma]{%
  \BAX{SubProd}
  {$\subimpl{#1}{c_1}{U}{T}$}
  {$\subimpl{#1, x : U}{c_2}{V}{W}$}  
  {$\subimpl{#1}{\lambda x : \ip{U}{#1}. c_2[\ctxdot~(c_1[x])]}
    {\Pi x : T.V}{\Pi x : U.W}$}
  {}
}

\newcommand{\SubSigmaI}[1][\Gamma]{%
\BAX{SubSigma}
{$\subimpl{#1}{c_1}{T}{U}$}
{$\subimpl{#1, x : T}{c_2}{V}{W}$}
{$\subimpl{#1}{(c_1[\pi_1~\ctxdot], c_2[\pi_1~\ctxdot/x][\pi_2~\ctxdot])}
  {\Sigma x : T. V}{\Sigma x : U. W}$}
{}
}

\newcommand{\SubSubI}[1][\Gamma]{%
\UAX{SubSub}
{$\subimpl{#1}{c}{U}{T}$}
{$\subimpl{#1}{c[\pi_1~\ctxdot]}{\mysubset{x}{U}{P}}{T}$}
{$T = \hnf{T} `^ \hnf{T} "/=" \{|\}$}
}

\newcommand{\SubSubIs}[1][\Gamma]{%
\UAX{SubSub}
{$\subimpl{#1}{c}{U}{T}$}
{$\subimpl{#1}{c[\pi_1~\ctxdot]}{\mysubset{x}{U}{P}}{T}$}
{}
}
   
\newcommand{\SubProofI}[1][\Gamma]{%
  \UAX{SubProof}
  {$\subimpl{#1}{c}{T}{U}$}
  {$\subimpl{#1}
  {\elt{\ip{U}{#1}}{\ip{\lambda x : U.P}{#1}}{c}
    {\ex{\ipG{#1}}{\ip{P}{#1}[c/x]}}}
  {T}{\mysubset{x}{U}{P}}$}
{$T = \hnf{T}$}
}

\def\subtiFig{
\begin{figure}[ht]
  \begin{center}
    \def\fCenter{\subtd}

    \vspace{\infvspace}
    \SubConvI\DP
    
    \vspace{\infvspace}
    \SubHnfI\DP

    \vspace{\infvspace}
    \SubProdI\DP

    \vspace{\infvspace}
    \SubSigmaI\DP
    
    \vspace{\infvspace}
    \SubSubI\DP
    
    \vspace{\infvspace}
    \SubProofI\DP
    
  \end{center}
  \caption{Réécriture de la coercion vers \CCI}
  \label{fig:coerce-impl-rules}
\end{figure}
}

\def\subtisc{
  \begin{center}
    \def\fCenter{\subti}
    \SubConvIs\DP
    \quad
    \SubHnfI\DP

    \vspace{\infvspace}
    \SubProdI\DP
    
    \vspace{\infvspace}
    \SubSigmaI\DP

    \vspace{\infvspace}
    \SubSubIs\DP

    \vspace{\infvspace}
    \SubProofI\DP
  \end{center}}

\def\subtis{
\begin{figure}[ht]
  \subtisc
  \caption{Réécriture de la coercion vers \CCI}
  \label{fig:coerce-impl-rules-short}
\end{figure}
}

%%% Local Variables: 
%%% mode: latex
%%% TeX-master: "subset-typing"
%%% LaTeX-command: "TEXINPUTS=\"style:.:\" latex"
%%% End: 
