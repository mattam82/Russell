\def\WfEmpty{
  \UAX{WfEmpty}
  {}
  {$\seq []$}
  {}
}  
  
\def\WfVar{
  \UAX{WfVar}
  {$\tgen{`G}{A}{s}$}
  {$\wf `G, x : A$}
  {$s `: \setproptype{} `^{} x `; `G$}
}

\def\PropSet{
  \UAX{PropSet}
  {$\wf `G$}
  {$\tgen{`G}{s}{\Type}$}
  {$s `: \{ \Prop, \Set \}$} 
}

\def\TypeType{
  \UAX{Type}
  {$\wf `G$}
  {$\tgen{`G}{\Type(i)}{\Type(i + 1)}$}
  {$i `: `N$}
}

\def\Var
{\BAX{Var}
  {$\wf `G$}
  {$x : A `: `G$}
  {$\tgen{`G}{x}{A}$}
  {}
}

\def\Prod{
  \BAX{Prod}
  {$\tgen{`G}{T}{s_1}$}
  {$\tgen{`G, x : T}{U}{s_2}$}
  {$\tgen{`G}{\Pi x : T.U}{s_3}$}
  {$(s_1, s_2, s_3) `: \mathcal{R} `^{} x `; `G$}
}

\def\Abs{
  \BAX{Abs}
  {$\tgen{`G}{\Pi x : T. U}{s}$}
  {$\tgen{`G, x : T}{M}{U }$}
  {$\tgen{`G}{\lambda x : T. M}{\Pi x : T.U}$}
  {$x `; `G$}
}

\def\App{
  \BAX{App}
  {$\tgen{`G}{f}{\Pi x : V. W}$}
  {$\tgen{`G}{u}{V}$}
  {$\tgen{`G}{(f u)}{W [ u / x ]}$}
  {$$}
}

\def\LetIn{
  \BAX{LetIn}
  {$\tgen{`G}{t}{T}$}
  {$\tgen{`G, x : T}{v}{V}$}
  {$\tgen{`G}{\letml~x = t~\inml~v}{V[t / x]}$}
  {$x `; `G$}
}

\def\SigmaR{
  \BAX{Sigma}
  {$\tgen{`G}{T}{s}$}
  {$\tgen{`G, x : T}{U}{s}$}
  {$\tgen{`G}{\Sigma x : T.U}{s}$}
  {$s `: \{ \Prop, \Set \} `^{} x `; `G$} 
}

\def\Sum{
  \TAX{Sum}
  {$\tgen{`G}{\Sigma x : T.U}{s}$}
  {$\tgen{`G}{t}{T}$}
  {$\tgen{`G}{u}{U[t/x]}$}
  {$\tgen{`G}{\pair{\Sigma x : T.U}{t}{u}}{\Sigma x : T.U}$}
  {}
}
 
\def\PiLeft{
  \UAX{PiLeft}
  {$\tgen{`G}{t}{`S x : T.U}$}
  {$\tgen{`G}{\pi_1~t}{T}$}
  {}
}

\def\PiRight{
  \UAX{PiRight}
  {$\tgen{`G}{t}{`S x : T.U}$}
  {$\tgen{`G}{\pi_2~t}{U[\pi_1~t/x]}$}
  {}
}

\def\LetSum{
  \BAX{LetSum}
  {$\tgen{`G}{t}{`S x : T. U}$}
  {$\tgen{`G, x : T, u : U}{v}{V }$}
  {$\tgen{`G}{\letml~(x, u) = t~\inml~v}{V}$}
  {$x,y `; `G$}
}

\def\Subset{
  \BAX{Subset}
  {$\tgen{`G}{U}{\Set}$}
  {$\tgen{`G, x : U}{P}{\Prop}$}
  {$\tgen{`G}{\mysubset{x}{U}{P}}{\Set}$}
  {$x `; `G$}
}

\def\LetSub{
  \UAX{LetSub}
  {$\tgen{`G}{t}{\mysubset{x}{T}{P}}$}
  {$\tgen{`G}{t}{T}$}
  {}
}

\def\Subsum{
  \TAX{Subsum}
  {$\tgen{`G}{T}{s}$}
  {$\tgen{`G}{t}{U}$}
  {$U \sub T$} % `G \subt 
  {$\tgen{`G}{t}{T}$}
  {}
}

\def\Coerce{\Subsum}

\def\Conv{
  \TAX{Conv}
  {$\tgen{`G}{T}{s}$}
  {$\tgen{`G}{t}{U}$}      
  {$U \eqbr T$}
  {$\tgen{`G}{t}{T}$}
  {}
}

\def\typedFig
{
\begin{figure}[tb]
  \begin{center}
    \def\fCenter{\wf}
    \WfEmpty \DP\quad
    \WfVar \DP
    
    \def\fCenter{\typed}
    \vspace{\infvspace}
    \PropSet\DP

%    \vspace{\infvspace}
%    \TypeType\DP

    \vspace{\infvspace}
    \Var\DP
    
    \vspace{\infvspace}
    \Prod\DP
    
    \vspace{\infvspace}
    \Abs\DP

    \vspace{\infvspace}
    \App\DP

%     \vspace{\infvspace}
%     \LetIn\DP
    
    \vspace{\infvspace}
    \SigmaR\DP

    \vspace{\infvspace}
    \Sum\DP
    
    \vspace{\infvspace}
%    \LetSum\DP
    \PiLeft\DP
    \quad
    \PiRight\DP

    \vspace{\infvspace}
    \Subset\DP

%%     \vspace{\infvspace}
%%     \LetSub\DP

    \vspace{\infvspace}
    \Subsum\DP
    
%%    \vspace{\infvspace}
%%    \Conv\DP
    
  \end{center}
  \caption{Calcul de coercion par prédicats - version déclarative}
  \label{fig:typing-decl-rules}
\end{figure}
}

%%% Local Variables: 
%%% mode: latex
%%% TeX-master: "subset-typing"
%%% LaTeX-command: "TEXINPUTS=\"style:$TEXINPUTS\" latex"
%%% End: 
