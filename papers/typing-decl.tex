\newcommand{\WfEmptyFull}[1]{
  \UAX{WfEmpty}
  {\quad}
  {$\wf{[]}$}
  {}
}  
\newcommand{\WfEmpty}[1][\Gamma]{\WfEmptyFull{#1}}
  
\newcommand{\WfVarFull}[4]{
  \UAX{WfVar}
  {$\tgen{#1}{#2}{#3}$}
  {$\wf{#1, #4 : #2}$}
  {$#3 `: \mathcal{S} `^{} #4 `; #1$}
}
\newcommand{\WfVar}[1][\Gamma]{\WfVarFull{#1}{A}{s}{x}}

\newcommand{\PropSetFull}[3]{
  \UAX{Axiom}
  {$\wf{#1}$}
  {$\tgen{#1}{#2}{#3}$}
  {$(#2, #3) `: \mathcal{A}$} 
}
\newcommand{\PropSet}[1][\Gamma]{\PropSetFull{#1}{s_1}{s_2}}


\newcommand{\TypeTypeFull}[1]{
  \UAX{Type}
  {$\wf{#1}$}
  {$\tgen{#1}{\Type(i)}{\Type(i + 1)}$}
  {$i `: `N$}
}
\newcommand{\TypeType}[1][\Gamma]{\TypeTypeFull{#1}}

\newcommand{\VarFull}[3]{
  \BAX{Var}
  {$\wf{#1}$}
  {$#2 : #3 `: #1$}
  {$\tgen{#1}{#2}{#3}$}
  {}
}
\newcommand{\Var}[1][\Gamma]{\VarFull{#1}{x}{A}} 

\newcommand{\ProdFull}[7]{
  \BAX{Prod}
  {$\tgen{#1}{#2}{#3}$}
  {$\tgen{#1, #4 : #2}{#5}{#6}$}
  {$\tgen{#1}{\Pi #4 : #2.#5}{#6}$}
   {}  %{$(#3, #6, #7) `: \mathcal{R}$} % `^{} #4 `; #1$}
}
\newcommand{\Prod}[1][\Gamma]{\ProdFull{#1}{T}{s_1}{x}{U}{s_2}{s_3}}

\newcommand{\AbsFull}[6]{
  \BAX{Abs}
  {$\tgen{#1}{\Pi #2 : #3.#4}{#5}$}
  {$\tgen{#1, #2 : #3}{#6}{#4}$}
  {$\tgen{#1}{\lambda #2 : #3. #6}{\Pi #2 : #3.#4}$}
  {} %$#2 `; #1$}
}

\newcommand{\Abs}[1][\Gamma]{\AbsFull{#1}{x}{T}{U}{s}{M}}

 \newcommand{\AppFull}[6]{
  \BAX{App}
  {$\tgen{#1}{#2}{\Pi #3 : #4. #5}$}
  {$\tgen{#1}{#6}{#4}$}
  {$\tgen{#1}{(#2 #6)}{#5 [ #6 / #3 ]}$}
  {$$}
}

\newcommand{\App}[1][\Gamma]{\AppFull{#1}{f}{x}{V}{W}{u}}

\newcommand{\SigmaRFull}[5]{
  \BAX{Sigma}
  {$\tgen{#1}{#2}{#3}$}
  {$\tgen{#1, #4 : #2}{#5}{#3}$}
  {$\tgen{#1}{\Sigma #4 : #2.#5}{#3}$}
  {$#3 `: \{ \Prop, \Set \}$} % `^{} #4 `; #1$} 
}
\newcommand{\SigmaR}[1][\Gamma]{\SigmaRFull{#1}{T}{s}{x}{U}}

\newcommand{\SumDepFull}[7][\Gamma]{
  \TAX{SumDep}
  {$\tgen{#1}{\Sigma #2 : #5. #6}{#7}$}
  {$\tgen{#1}{#3}{#5}$}
  {$\tgen{#1}{#4}{#6[#3 / #2]}$}
  {$\tgen{#1}{\pair{\Sigma #2 : #5.#6}{#3}{#4}}{\Sigma #2 : #5.#6}$}
  {}
}

\newcommand{\SumDep}[1][\Gamma]{\SumDepFull[#1]{x}{t}{u}{T}{U}{s}}
 
\newcommand{\PiLeftFull}[5][\Gamma]{
  \UAX{PiLeft}
  {$\tgen{#1}{#2}{`S #3 : #4.#5}$}
  {$\tgen{#1}{\pi_1~#2}{#4}$}
  {}
}
\newcommand{\PiLeft}[1][\Gamma]{\PiLeftFull[#1]{t}{x}{T}{U}}

\newcommand{\PiRightFull}[5][\Gamma]{
  \UAX{PiRight}
  {$\tgen{#1}{#2}{`S #3 : #4.#5}$}
  {$\tgen{#1}{\pi_2~#2}{#5[\pi_1~#2/#3]}$}
  {}
}
\newcommand{\PiRight}[1][\Gamma]{\PiRightFull[#1]{t}{x}{T}{U}}


\newcommand{\SubsetFull}[4]{
  \BAX{Subset}
  {$\tgen{#1}{#3}{\Set}$}
  {$\tgen{#1, #2 : #3}{#4}{\Prop}$}
  {$\tgen{#1}{\mysubset{#2}{#3}{#4}}{\Set}$}
  {} %{$#2 `; #1$}
}
\newcommand{\SubsetR}[1][\Gamma]{\SubsetFull{#1}{x}{U}{P}}


\newcommand{\SubsumFull}[5]{
  \BAX{Subsum}
  {$\tgen{#1}{#4}{#5}$}
%  {$\tgen{#1}{#2}{#3}$}
  {$#1 \seq #5 \sub #2 : #3$} % #1 \subt 
  {$\tgen{#1}{#4}{#2}$}
  {}
}
\newcommand{\Subsum}[1][\Gamma]{\SubsumFull{#1}{T}{s}{t}{U}} 

\def\Coerce{\Subsum}

\newcommand{\ConvFull}[5]{
  \BAX{Conv}
  {$\tgen{#1}{#4}{#5}$}
  {$#1 \seq #5 \eqbr #2 : #3$}
  {$\tgen{#1}{#4}{#2}$}
  {}
}
\newcommand{\Conv}[1][\Gamma]{\ConvFull{#1}{T}{s}{t}{U}}

\newcommand{\typedRules}{
  \begin{center}
    \def\seq{\typed}
    \def\fCenter{\wf}
    \WfEmpty \DP\quad
    \WfVar \DP
    
    \def\fCenter{\typed}
    \vspace{\infvspace}
    \PropSet\DP

    \vspace{\infvspace}
    \Var\DP
    
    \vspace{\infvspace}
    \Prod\DP
    
    \vspace{\infvspace}
    \Abs\DP

    \vspace{\infvspace}
    \App\DP

    \vspace{\infvspace}
    \SigmaR\DP

    \vspace{\infvspace}
    \SumDep\DP
    
    \vspace{\infvspace}
    \PiLeft\DP
    \quad
    \PiRight\DP

    \vspace{\infvspace}
    \SubsetR\DP

    \vspace{\infvspace}
    \Subsum\DP
      
  \end{center}
}

\def\typedFig
{
\begin{figure}[tb]
  \typedRules
  \caption{Calcul de coercion par prédicats - version déclarative}
  \label{fig:typing-decl-rules}
\end{figure}
}

\newcommand{\axiomsd}{
  \[\begin{array}{cccl}
    s_1 & s_2 & s_3 = s_2 & \text{Trait} \\
    \hline
    \Set & \Set & \Set & \text{Dependent arrow} \\
    \Type & \Set & \Set & \text{Polymorphism} \\
    \Set & \Type & \Type & \text{Dependent types} \\
    \Set & \Prop & \Prop & \text{Terms in propositions} \\
    \Prop & \Prop & \Prop & \text{Implication} \\
    \Type & \Prop & \Prop & \text{Impredicativity}
  \end{array}\]
}
\newcommand{\axiomsdFull}{
  \[\begin{array}{cccll}
    s_1 & s_2 & s_3 & \text{Habitants} & \text{Exemple} \\
    \hline
    \Prop & \Prop & \Prop & \text{Implication logique} & x ``<= 0 "->" x = 0  \\
    \Set & \Set & \Set & \text{Fonctions} & \Pi x : \nat. \nat \\
    \Type & \Set & \Type & \text{Fonctions polymorphes} & \Pi A : \Set, A
    "->" A \\
    \Set & \Type & \Type & \text{Types dépendants} & \sref{vector} : \nat "->" \Set : \Set "->" \Type \\
    \Set & \Prop & \Prop & \text{Termes dans les propositions} & 
    \Pi n : \nat. \Pi l : \text{list}~n. \text{length}~l = n \\
    \Type & \Prop & \Prop & \text{Imprédicativité de } \Prop & \Pi x : Prop. x `V `! x \\
    % \Type(i) & \Type(j) & \Type(max~i~j)  & \text{Connecteurs logiques,
    %   \ldots} & \Pi A : \Prop. \Pi B : \Prop. A `^ B "->" B `^ A
  \end{array}\]
}
%%% Local Variables: 
%%% mode: latex
%%% TeX-master: "subset-typing"
%%% LaTeX-command: "TEXINPUTS=\"style:$TEXINPUTS\" latex"
%%% End: 
